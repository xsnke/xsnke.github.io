<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>老旮の收藏馆</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        html { scroll-behavior: smooth; }
        [v-cloak] { display: none; }
        /* 避免移动端点击高亮 */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: { primary: '#3b82f6', dark: '#0f172a', card: '#1e293b' }
                }
            }
        }
    </script>
</head>
<body class="bg-slate-50 text-slate-800 dark:bg-dark dark:text-slate-200 transition-colors duration-500 font-sans antialiased">

    <div id="app" v-cloak class="flex h-screen overflow-hidden relative">

        <!-- 移动端遮罩 -->
        <div v-if="isMenuOpen" @click="isMenuOpen = false" 
             class="fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 md:hidden transition-opacity"></div>

        <!-- 侧边栏 (响应式抽屉) -->
        <aside :class="isMenuOpen ? 'translate-x-0' : '-translate-x-full'" 
               class="fixed inset-y-0 left-0 w-64 bg-white dark:bg-card border-r border-slate-200 dark:border-slate-700 z-50 transition-transform duration-300 ease-in-out md:relative md:translate-x-0 md:flex flex-col flex-shrink-0">
            <div class="p-6 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center">
                <h1 class="text-xl font-bold bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent">
                    老旮の收藏馆
                </h1>
                <button @click="isMenuOpen = false" class="md:hidden text-slate-400">
                    <i class="ph ph-x text-xl"></i>
                </button>
            </div>
            
            <nav class="flex-1 overflow-y-auto p-4 space-y-6">
                <div v-for="group in categories" :key="group.id">
                    <div class="px-4 py-2 text-xs font-bold text-slate-400 uppercase tracking-widest">
                        {{ group.name }}
                    </div>
                    <div class="space-y-1 mt-1">
                        <a v-for="subCat in group.subCategories" 
                           :href="'#' + subCat.id"
                           @click="isMenuOpen = false"
                           class="flex items-center gap-3 px-4 py-2.5 text-sm font-medium rounded-lg transition-all hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-400 hover:translate-x-1">
                            <i :class="subCat.icon || 'ph-hash'" class="ph text-lg text-blue-500/70"></i>
                            {{ subCat.name }}
                        </a>
                    </div>
                </div>
            </nav>
        </aside>

        <!-- 主内容区域 -->
        <main class="flex-1 flex flex-col h-full relative min-w-0">
            <!-- 顶部工具栏 -->
            <header class="bg-white/80 dark:bg-dark/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 p-3 md:p-4 sticky top-0 z-30">
                <div class="max-w-5xl mx-auto w-full flex items-center gap-2 md:gap-4">
                    <!-- 移动端菜单按钮 -->
                    <button @click="isMenuOpen = true" class="md:hidden p-2 text-slate-600 dark:text-slate-400 active:scale-90 transition-transform">
                        <i class="ph-bold ph-list text-2xl"></i>
                    </button>

                    <!-- 搜索框 -->
                    <div class="relative flex-1">
                        <i class="ph ph-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"></i>
                        <input type="text" v-model="searchQuery" placeholder="搜索..." 
                               class="w-full pl-9 pr-4 py-2 bg-slate-100 dark:bg-slate-800 border-none rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all text-sm md:text-base">
                    </div>

                    <!-- 主题切换 -->
                    <button @click="toggleTheme" 
                            class="p-2 md:p-2.5 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-yellow-400 hover:ring-2 hover:ring-blue-500 transition-all shadow-sm shrink-0">
                        <i :class="isDark ? 'ph-sun-dim' : 'ph-moon-stars'" class="ph-bold text-xl"></i>
                    </button>
                </div>
            </header>

            <div class="flex-1 overflow-y-auto p-4 md:p-8">
                <div class="max-w-6xl mx-auto">
                    
                    <!-- 搜索视图 -->
                    <div v-if="searchQuery" class="space-y-6">
                        <h2 class="text-lg font-bold flex items-center gap-2 text-blue-500">
                            <i class="ph ph-magnifying-glass"></i> 搜索结果
                        </h2>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4">
                            <a v-for="link in filteredLinks" :href="link.url" target="_blank" class="group bg-white dark:bg-card p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all flex flex-col h-full">
                                <div class="flex items-start justify-between mb-2">
                                    <img :src="link.icon || 'https://favicon.im/' + link.url" class="w-8 h-8 rounded shrink-0 object-contain" @error="(e) => e.target.src='https://api.dicebear.com/7.x/initials/svg?seed=' + link.title">
                                    <i class="ph ph-arrow-up-right text-slate-300 group-hover:text-blue-500"></i>
                                </div>
                                <h3 class="font-bold text-sm mb-1 line-clamp-1">{{ link.title }}</h3>
                                <p class="text-xs text-slate-500 line-clamp-2">{{ link.desc || link.url }}</p>
                            </a>
                        </div>
                    </div>

                    <!-- 三级分类视图 -->
                    <div v-else v-for="group in categories" :key="group.id" class="mb-12 md:mb-16">
                        <div class="relative py-6 md:py-8">
                            <div class="absolute inset-0 flex items-center"><div class="w-full border-t border-slate-200 dark:border-slate-700"></div></div>
                            <div class="relative flex justify-start">
                                <span class="pr-4 bg-slate-50 dark:bg-dark text-lg md:text-xl font-black text-slate-400 tracking-widest italic uppercase">{{ group.name }}</span>
                            </div>
                        </div>

                        <div v-for="subCat in group.subCategories" :key="subCat.id" :id="subCat.id" class="scroll-mt-20 md:scroll-mt-24 mb-8 md:mb-10 last:mb-0">
                            <div class="flex items-center gap-2 mb-4 md:mb-6">
                                <div class="w-1 h-5 md:h-6 bg-blue-500 rounded-full"></div>
                                <h2 class="text-lg md:text-xl font-bold text-slate-800 dark:text-slate-100">{{ subCat.name }}</h2>
                            </div>

                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4">
                                <a v-for="link in subCat.links" :href="link.url" target="_blank" 
                                   class="group bg-white dark:bg-card p-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:shadow-xl md:hover:-translate-y-1 transition-all flex flex-col h-full">
                                    <div class="flex items-start justify-between mb-3">
                                        <div class="w-10 h-10 rounded-lg bg-slate-50 dark:bg-slate-800 flex items-center justify-center p-2">
                                            <img :src="link.icon || 'https://favicon.im/' + link.url" class="w-full h-full object-contain" @error="(e) => e.target.src='https://api.dicebear.com/7.x/initials/svg?seed=' + link.title">
                                        </div>
                                        <i class="ph ph-arrow-up-right text-slate-300 group-hover:text-blue-500 transition-colors"></i>
                                    </div>
                                    <h3 class="font-bold text-slate-800 dark:text-slate-100 mb-1 text-sm md:text-base line-clamp-1 group-hover:text-blue-500">{{ link.title }}</h3>
                                    <p class="text-xs text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed">{{ link.desc || link.url }}</p>
                                </a>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;

        const bookmarksData = [
            {
                id: 'essential',
                name: '核心常用',
                subCategories: [
                    {
                        id: 'daily',
                        name: '常用推荐',
                        icon: 'ph-star',
                        links: [
                            { title: 'GitHub', url: 'https://github.com', desc: '世界最大同性の交友♂网站' },
                            { title: 'GitHub镜像站', url: 'https://bgithub.xyz/', desc: '' },
                            { title: 'Bilibili', url: 'https://www.bilibili.com', desc: '干杯' },
                            { title: 'YouTube', url: 'https://youtube.com', desc: '油管' },
                        ]
                    }
                ]
            },
            {
                id: 'galgame',
                name: '旮旯给木',
                subCategories: [
                    {
                        id: 'galgame-recourse',
                        name: '旮旯资源站',
                        icon: 'ph-heartbeat',
                        links: [
                            { title: '绯月ScarletMoon', url: 'https://bbs.kfpromax.com/index.php', desc: 'KF', icon: 'img/kfpromax.ico'},
                            { title: 'GGBases', url: 'https://ggbases.dlgal.com/', desc: '磁力资源' },
                            { title: 'Hentai Sharing', url: 'https://hentai-sharing.net/', desc: '' },
                            { title: 'Anime-Sharing Community', url: 'https://anime-sharing.com/', desc: '' },
                            { title: '鲲galgame论坛', url: 'https://kungal.com', desc: '' },
                            { title: '梓澪の妙妙屋', url: 'https://zi1.cc/', desc: '备用网址:zi6.cc、gal.games、get.galgame.ing、zi4.cc、zi8.cc、gal.ga' },
                            { title: '初音的青葱', url: 'https://www.fufugal.com/', desc: '发布页:xygalgame.com' },
                            { title: 'TouchGAL', url: 'https://www.touchgal.top/', desc: '' },
                            { title: 'LyCorisGal', url: 'https://www.lycorisgal.com/', desc: '' },
                            { title: '绮梦ACG', url: 'https://acgs.one/', desc: '' },
                            { title: '稻荷GAL', url: 'https://inarigal.net/', desc: '' },
                            { title: 'Faustの旧作館', url: 'https://www.erogame.space/', desc: '', icon: "img/faust.ico"},
                            { title: '失落の小站', url: 'https://www.shinnku.com/', desc: '' },
                            { title: '量子ACG', url: 'https://lzacg.org/', desc: '' },
                            { title: 'YAAS', url: 'https://alist-public.imoutoheaven.org/', desc: '大佬做的OD仓库' },
                            { title: 'ZodGame', url: 'https://zodgame.xyz/', desc: '' },
                            { title: '花火学园', url: 'https://www.sayhanabi.net/', desc: '' },
                            { title: '星空论坛', url: 'https://bbs2.seikuu.com/', desc: '' },
                            { title: '2DJGAME', url: 'https://bbs4.2djgame.net/home/forum.php', desc: '', icon: 'img/2djgame.ico'},
                            { title: 'KDays论坛', url: 'https://bbs2.kdays.net/', desc: '备用网址:bbs.acgn.at、b.schale.moe' },
                            { title: '澄空学园', url: 'https://bbs.sumisora.net/', desc: '' },
                            { title: 'galgame藏经阁', url: 'https://www.galgameacgjohn.top/', desc: '', icon: "img/galgameacgjohn.ico"},
                            { title: '维咔VikACG', url: 'https://www.vikacg.com/post', desc: '' },
                            { title: '05的资源小站', url: 'https://05fx.022016.xyz/', desc: '' },
                            { title: '小鳥遊暁の会员制餐厅', url: 'https://t-satoru.top/', desc: '' },
                            { title: 'Galgamer', url: 'https://galgamer.moe/', desc: '' },
                            { title: '沧水网盘', url: 'https://pan.cangshui.net/', desc: '主要为ONS资源，密码是god' },
                            { title: '喵窝', url: 'https://galgame5.rssing.com/chan-51243512/index-latest.php', desc: '', icon: 'img/miaowo.ico'},
                            { title: 'GAL图书馆', url: 'https://gallibrary.pw/', desc: '' },
                            { title: '萤ノ光', url: 'https://yinghu.netlify.app/', desc: '' },
                            { title: '喵源领域', url: 'https://www.nyantaku.com/', desc: '' },
                            { title: '晴空咖啡馆', url: 'https://aozoracafe.com/', desc: '' },
                            { title: 'Hikarinagi', url: 'https://www.hikarinagi.com/', desc: '' },
                            { title: 'NekoGAL', url: 'https://www.nekogal.com/', desc: '' },
                            { title: 'Mikocon', url: 'https://www.mikocon.com/', desc: '' },
                            { title: '黄油聚集地', url: 'https://t.me/acg_nsfw', desc: '' },
                            { title: 'Galworld', url: 'https://acgngames.net/', desc: '' },
                            { title: 'ACG家园网', url: 'https://acgjyw.com/', desc: '' },
                            { title: 'Galgamex', url: 'https://www.galgamex.top/', desc: '' },
                        ]
                    },
                    {
                        id: 'galgame-patch',
                        name: '旮旯补丁站',
                        icon: 'ph-bandaids',
                        links: [
                            { title: '2DFan', url: 'https://2dfan.com/', desc: '备用域名:acgfan.top、2dfdf.de、2dfmax.top、fan2d.top' },
                            { title: '2DFan域名发布页', url: 'https://github.com/2dfan/domains', desc: '' },
                            { title: '御爱同盟', url: 'https://www.ai2.moe/', desc: '' },
                            { title: '鲲 Galgame 补丁', url: 'https://www.moyu.moe/', desc: '' },
                            { title: '新：誠也の部屋', url: 'https://seiya-saiga.com/', desc: 'GAL攻略、存档' },

                        ]
                    },
                    {
                        id: 'galgame-news',
                        name: '旮旯讯息',
                        icon: 'ph-newspaper',
                        links: [
                            { title: 'Getchu.com', url: 'https://www.getchu.com/', desc: 'Getchu' },
                            { title: 'VNDB', url: 'https://vndb.org/', desc: '视觉小说数据库' },
                            { title: '2DFan', url: 'https://2dfan.com/', desc: '' },
                            { title: '月幕Galgame', url: 'https://www.ymgal.games/', desc: '' },
                            { title: 'エロゲー批評空間', url: 'https://erogamescape.dyndns.org/', desc: '批评空间' },
                            { title: 'Plum\'s Blog', url: 'https://plumz.me/', desc: '' },
                            { title: 'CnGal 中文GalGame资料站', url: 'https://www.cngal.org/', desc: '' },
                            { title: '新：誠也の部屋', url: 'https://seiya-saiga.com/', desc: '' },
                        ]
                    },
                    {
                        id: 'galgame-tools',
                        name: '旮旯工具',
                        icon: 'ph-gear',
                        links: [
                            { title: '手机模拟器下载', url: 'https://pan.t-satoru.top/s3b/Emulators', desc: '' },
                            { title: 'Locale-Emulator', url: 'https://github.com/xupefei/Locale-Emulator', desc: 'LE转区工具' },
                            { title: 'Magpie', url: 'https://github.com/Blinue/Magpie', desc: '使游戏窗口全屏显示' },
                            { title: '团子模拟器', url: 'https://translator.dango.cloud/', desc: '' },
                            { title: 'LunaTranslator', url: 'https://docs.lunatranslator.org/zh/', desc: '' },
                            { title: '御坂翻译器', url: 'https://github.com/hanmin0822/MisakaTranslator', desc: '' },
                            { title: 'GARbro', url: 'https://github.com/morkt/GARbro', desc: 'Visual Novels resource browser' },
                            { title: 'RetroArch', url: 'https://www.retroarch.com/', desc: '' },
                        ]
                    }
                ]
            },
            {
                id: 'fuckyou',
                name: '114514',
                subCategories: [
                    {
                        id: 'fuckme',
                        name: '1919810',
                        icon: 'ph-gender-nonbinary',
                        links: [
                            { title: '绯月ScarletMoon', url: 'https://bbs.kfpromax.com/index.php', desc: 'KF', icon: 'img/kfpromax.ico'},
                            { title: 'Faustの旧作館', url: 'https://www.erogame.space/', desc: '', icon: "img/faust.ico"},
                            { title: '花火学园', url: 'https://www.sayhanabi.net/', desc: '' },
                            { title: '星空论坛', url: 'https://bbs2.seikuu.com/', desc: '' },
                            { title: 'RenPy中文空间', url: 'https://www.renpy.cn/', desc: '' },
                            { title: '鲲 Galgame 论坛', url: 'https://www.kungal.com/', desc: '' },
                            { title: 'TouchGal', url: 'https://www.touchgal.top', desc: '' },
                            { title: '鲲 Galgame 补丁', url: 'https://www.moyu.moe/', desc: '' },
                            { title: '真白萌', url: 'https://masiro.me/admin', desc: '' },
                            { title: '補檔冰室', url: 'https://www.manhuabudangbbs.com/', desc: '' },
                            { title: 'LyCorisGal', url: 'https://www.lycorisgal.com/', desc: '' },
                            { title: '初音的青葱', url: 'https://fufugal.com/', desc: '' },
                            { title: 'galgame藏经阁', url: 'https://www.galgameacgjohn.top/', desc: '', icon: "img/galgameacgjohn.ico"},
                            { title: '喵源领域', url: 'https://www.nyantaku.com/', desc: '' },
                            { title: 'ACG家园网', url: 'https://acgjyw.com/', desc: '' },
                            { title: 'Labnana', url: 'https://labnana.com/zh', desc: '' },
                            { title: '搜 同', url: 'https://stboy.net/', desc: '' },
                            { title: 'Galgamex', url: 'https://www.galgamex.top/', desc: '' },
                            { title: '终点论坛', url: 'https://bbs.drdian.net/', desc: '' },
                            { title: 'ZodGame', url: 'https://zodgame.xyz/', desc: '' },
                            { title: '紳士の庭', url: 'https://gmgard.moe/', desc: '' },
                            { title: '绅士仓库', url: 'https://cangku.moe/', desc: '' },
                            { title: '禁漫天堂', url: 'https://18comic.vip/', desc: '' },
                            { title: '天使动漫', url: 'https://tsdm39.com/', desc: '' },
                            { title: '2DFan', url: 'https://2dfmax.top', desc: '' },

                        ]
                    }
                ]
            }
        ];

        createApp({
            setup() {
                const categories = ref(bookmarksData);
                const searchQuery = ref('');
                const isMenuOpen = ref(false); // 移动端菜单状态

                // 暗黑模式
                const isDark = ref(localStorage.getItem('theme') === 'dark');
                const updateTheme = () => {
                    if (isDark.value) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                };
                const toggleTheme = () => {
                    isDark.value = !isDark.value;
                    localStorage.setItem('theme', isDark.value ? 'dark' : 'light');
                    updateTheme();
                };

                // 搜索逻辑
                const filteredLinks = computed(() => {
                    if (!searchQuery.value) return [];
                    const query = searchQuery.value.toLowerCase();
                    const results = [];
                    categories.value.forEach(group => {
                        group.subCategories.forEach(cat => {
                            cat.links.forEach(link => {
                                if (link.title.toLowerCase().includes(query) || 
                                    (link.desc && link.desc.toLowerCase().includes(query)) ||
                                    link.url.toLowerCase().includes(query)) {
                                    results.push({ ...link, category: cat.name });
                                }
                            });
                        });
                    });
                    return results;
                });

                onMounted(() => {
                    updateTheme();
                });

                return { categories, searchQuery, filteredLinks, isDark, toggleTheme, isMenuOpen };
            }
        }).mount('#app');
    </script>
</body>
</html>